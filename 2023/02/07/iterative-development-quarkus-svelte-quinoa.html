<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<link rel=stylesheet href=/blog.css>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<title>
Iterative development with Quarkus and Svelte, care of Quinoa &ndash; ebullient¬∑works
</title>
<link rel=canonical href=/2023/02/07/iterative-development-quarkus-svelte-quinoa.html>
</head>
<body>
<div class=wrapper>
<header class=page-header>
<h1><a href=/>ebullient¬∑works</a></h1>
<div>
[ <a href=/about/>About</a> &#183; <a href=/archive/>Archive</a> &#183; <a href=/tags/>Tags</a> ]
</div>
</header>
<main class=page id=content>
<article class=post>
<header>
<h1>Iterative development with Quarkus and Svelte, care of Quinoa</h1>
</header>
<section class=content>
<p>Another conference is coming up, and I&rsquo;m writing another ridiculous frankenstein app for it.</p>
<p>For this revision, I am going to add a local-only Web UI for a few reasons:</p>
<ul>
<li>This app is still mostly command-line driven, but some configuration options are awkward to set as arguments, and manually editing a config file is &mldr; meh.</li>
<li>I haven&rsquo;t done any serious front-end UI work in a really long time. The UI for <a href=https://github.com/gameontext/gameon-webapp>Game On! Text adventure</a> is overdue for an overhaul, it&rsquo;s an Angular 1 app. I know, I know. Don&rsquo;t judge me.</li>
</ul>
<p>Between one thing and another, I&rsquo;ve been doing more TypeScript alongside my Java and because of some collaboration on plugins for <a href=https://obsidian.md/>Obsidian.md</a>, I&rsquo;ve been bumping up against Svelte. I&rsquo;m going to use this little project to actually figure out how Svelte works.</p>
<p>This project will then have:</p>
<ul>
<li><a href=https://quarkus.io/>Quarkus</a> as the main CLI driver that will sometimes wait around for awhile while you fuss around with a Web UI.</li>
<li><a href=https://svelte.dev/>Svelte</a> to create a UI that feels nice to use.</li>
<li><a href=https://maven.apache.org/>Maven</a> for building Java things</li>
<li><a href=https://nodejs.org/en/>Node</a> + <a href=https://vitejs.dev/>Vite</a> for TypeScript tooling</li>
</ul>
<p>On the surface, the above sounds like a big mess, right? I&rsquo;m installing double the tools, having to do this build in two steps, and then do the fancy dance to get the Node stuff in the right place in the Java stuff, and deal with making native images happy, and&mldr; <em>gross</em> ü§¢.</p>
<p>Thankfully, <a href=https://github.com/ia3andy>Andy Damevin</a> has already come to provide the rescue I didn&rsquo;t know I would need. He created the <a href=https://quarkiverse.github.io/quarkiverse-docs/quarkus-quinoa/dev/index.html>Quinoa extension</a>, and I am a fan! üéâ</p>
<p>The Quinoa extension manages building and packaging the embedded Web UI with its preferred tools. So the outer Maven build can carry on doing its thing, and the Quinoa extension will invoke the appropriate node scripts to build and package the Web UI, and tuck them in the right place for serving with an uber jar or native binary. Not only that, but it integrates Quarkus dev mode with the web framework&rsquo;s live coding support, which means you just keep coding and the entire web app evolves as you go. Holy cow, it&rsquo;s awesome.</p>
<p>Some nitty details, notes for future me, that may end up changing a bit as I keep going, but the important parts of setting this up:</p>
<ol>
<li>Create a Quarkus project if you don&rsquo;t have one (obvious&mldr;)</li>
<li>Add the Quarkiverse Quinoa extension: <code>quarkus ext add quinoa</code> is easiest here.</li>
<li>In your Quarkus project, create and navigate to <code>src/main</code></li>
<li>Create your front-end with your favorite tooling choices. I used <code>npm init vite</code> to create a new <code>vite</code> project, named it <code>webui</code> and chose <code>Svelte</code> as the framework. <em>et voil√†</em>, a <code>src/main/webui</code> folder, ready to go.</li>
</ol>
<p>For seamless live-coding in dev mode, I needed two things:</p>
<ol>
<li>
<p>In <code>src/main/resources/application.properties</code></p>
<pre tabindex=0><code class=language-properties data-lang=properties>quarkus.quinoa.dev-server.port=5173
quarkus.quinoa.build-dir=dist
quarkus.quinoa.ignored-path-prefixes=/config,/favicon.ico
</code></pre></li>
<li>
<p>In <code>src/main/webui/vite.config.ts</code>:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-ts data-lang=ts><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span>server<span style=color:#000;font-weight:700>:</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  port: <span style=color:#458;font-weight:700>5173</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>  host<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;127.0.0.1&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>  hmr<span style=color:#000;font-weight:700>:</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#998;font-style:italic>// for proxying from quarkus dev
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#998;font-style:italic></span>    port: <span style=color:#458;font-weight:700>5173</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#998;font-style:italic>// for testing standalone
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#998;font-style:italic></span>    <span style=color:#998;font-style:italic>// protocol: &#39;ws&#39;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#998;font-style:italic></span>    host<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;127.0.0.1&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>  }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>}
</code></pre></div></li>
</ol>
<p>Andy has done a great job documenting the requirements for different web frameworks, you should be able to get your current favorite working.</p>
<p>Cheers (and well done, Andy)! üçª</p>
</section>
<footer class=byline>
<div>posted <time class=post_date>07 February 2023</time></div>
<div class=tags>tags:
<ul><li>&nbsp;<a href=/tags/#gameontext>gameontext</a></li><li>&nbsp;<a href=/tags/#java>java</a></li><li>&nbsp;<a href=/tags/#pockets>pockets</a></li><li>&nbsp;<a href=/tags/#quarkus>quarkus</a></li><li>&nbsp;<a href=/tags/#svelte>svelte</a></li></ul>
</div>
</footer>
</article>
<nav class=prev-next>
<div class=nav-left><a href=/2022/10/12/signing-git-commits.html title="Previous: Signing git commits">&#171; Older</a></div>
<div class=nav-center><a href=/>Top</a> | <a href=/archive/>Archive</a></div>
<div class=nav-right><a href=/2023/02/10/quarkus-camel-in-bites-rest.html title="Next: Quarkus and Camel in bites: REST endpoints">Newer &#187;</a></div>
</nav>
</main>
</div>
<footer class=page-footer>
<div id=copyrights>&#169; 2002-2023 Erin Schnabel</div>
<div class=icons>
<a target=_blank rel=nopopener href=https://github.com/ebullient title="ebullient on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a>
<a target=_blank rel="me nopopener" href=https://fosstodon.org/@ebullient title="Follow @ebullient"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</a>
<a target=_blank rel=nopopener href=https://www.linkedin.com/in/erinschnabel/ title="Erin Schnabel on linked.in"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1.0 83.5.0 53.8a53.79 53.79.0 01107.58.0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29.0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
</a>
<a target=_blank rel=nopopener href=/index.xml title=Subscribe><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg> </a>
</div>
</footer>
</body>
</html>